<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Estoque</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <h1>Sistema de Gerenciamento de Estoque</h1>
                    <div id="user-info" class="user-info" style="display: none;">
                        <span id="user-name"></span>
                        <button id="header-logout-btn" class="logout-btn-header">Sair</button>
                    </div>
                </div>
        </div>
    </header>
    
    <div class="container">
        <!-- Tela de Login -->
        <div id="login-screen" class="login-container">
            <h2>Login</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">Usu√°rio:</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit">Entrar</button>
                <div id="login-error" class="error-message">
                    Usu√°rio ou senha incorretos!
                </div>
            </form>
            <!-- BOT√ÉO ADMIN APENAS NA TELA DE LOGIN -->
            <div style="margin-top: 20px; text-align: center;">
                <button id="admin-access-btn" class="btn-user-manager">
                    üëë ACESSO ADMINISTRATIVO
                </button>
            </div>
        </div>
        
        <!-- Conte√∫do Principal (ap√≥s login) -->
        <div id="main-content" class="main-content">
            <div class="tabs">
                <div class="tab active" data-tab="balance">Consulta de Saldo</div>
                <div class="tab" data-tab="products" id="products-tab-header">Cadastro de Produtos</div>
                <div class="tab" data-tab="movement" id="movement-tab-header">Movimenta√ß√£o</div>
                <div class="tab" data-tab="logs" id="logs-tab-header">Logs</div>
            </div>
            
            <!-- Aba de Consulta de Saldo -->
            <div id="balance-tab" class="tab-content active">
                <h2>Consulta de Saldo</h2>
                <div id="readonly-message" class="readonly-message" style="display: none;">
                    <strong>Modo de Consulta:</strong> Voc√™ est√° logado como usu√°rio de consulta. Apenas visualiza√ß√£o permitida.
                </div>
                <div class="form-group">
                    <label for="search-product">Buscar Produto:</label>
                    <input type="text" id="search-product" placeholder="Digite o nome do produto...">
                </div>
                <table id="balance-table">
                    <thead>
                        <tr>
                            <th data-sort="name">Nome <span class="sort-indicator">‚ñº</span></th>
                            <th data-sort="model">Modelo (Cor)</th>
                            <th data-sort="balance">Saldo</th>
                        </tr>
                    </thead>
                    <tbody id="balance-table-body">
                        <!-- Os dados ser√£o preenchidos via JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <!-- Aba de Cadastro de Produtos -->
            <div id="products-tab" class="tab-content">
                <h2>Cadastro de Produtos</h2>
                <div id="readonly-products-message" class="readonly-message" style="display: none;">
                    <strong>Acesso Restrito:</strong> Esta funcionalidade n√£o est√° dispon√≠vel para usu√°rios de consulta.
                </div>
                <div id="product-success" class="success-message">
                    Produto cadastrado com sucesso!
                </div>
                <form id="product-form">
                    <input type="hidden" id="product-id" value="">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="product-name">Nome do Produto:</label>
                            <input type="text" id="product-name" required>
                        </div>
                        <div class="form-group">
                            <label for="product-model">Modelo (Cor):</label>
                            <input type="text" id="product-model" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="initial-balance">Saldo Inicial:</label>
                            <input type="number" id="initial-balance" min="0" required>
                        </div>
                    </div>
                    <button type="submit" id="product-submit-btn">Cadastrar Produto</button>
                    <button type="button" id="product-cancel-btn" style="display: none; margin-top: 10px; background: #95a5a6;">Cancelar Edi√ß√£o</button>
                </form>
                
                <h3>Produtos Cadastrados</h3>
                <table id="products-table">
                    <thead>
                        <tr>
                            <th data-sort="name">Nome <span class="sort-indicator">‚ñº</span></th>
                            <th data-sort="model">Modelo (Cor)</th>
                            <th data-sort="balance">Saldo</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="products-table-body">
                        <!-- Os dados ser√£o preenchidos via JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <!-- Aba de Movimenta√ß√£o -->
            <div id="movement-tab" class="tab-content">
                <h2>Movimenta√ß√£o de Estoque</h2>
                <div id="readonly-movement-message" class="readonly-message" style="display: none;">
                    <strong>Acesso Restrito:</strong> Esta funcionalidade n√£o est√° dispon√≠vel para usu√°rios de consulta.
                </div>
                <div id="movement-success" class="success-message">
                    Movimenta√ß√£o registrada com sucesso!
                </div>
                
                <h3>Movimenta√ß√£o R√°pida</h3>
                <p>Use os contadores para ajustar o saldo de cada produto. Valores positivos aumentam o estoque, valores negativos diminuem.</p>
                
                <div class="movement-grid" id="movement-grid">
                    <!-- Os itens ser√£o preenchidos via JavaScript -->
                </div>
                
                <div class="form-group">
                    <label for="movement-ficha">N√∫mero da Ficha:</label>
                    <input type="number" id="movement-ficha" min="1" required placeholder="Digite o n√∫mero da ficha">
                </div>
                
                <button id="save-movements" style="margin-top: 20px;">Salvar Todas as Movimenta√ß√µes</button>
            </div>
            
            <!-- Aba de Logs -->
            <div id="logs-tab" class="tab-content">
                <h2>Logs de Movimenta√ß√£o</h2>
                
                <!-- Se√ß√£o de Gerenciamento de Dados (MOVIDA PARA AQUI) -->
                <div class="data-management">
                    <h3>Exportar/Importar Dados</h3>
                    <div id="readonly-data-message" class="readonly-message" style="display: none;">
                        <strong>Modo de Consulta:</strong> Apenas exporta√ß√£o de dados est√° dispon√≠vel.
                    </div>
                    
                    <div class="data-buttons">
                        <div class="export-section">
                            <h4>Exportar Dados</h4>
                            <p>Baixe os dados em formato JSON ou Excel (CSV):</p>
                            <div class="export-options">
                                <button id="export-json-btn" class="export-btn" style="width: auto;">üìä Exportar JSON</button>
                                <button id="export-csv-btn" class="export-btn" style="width: auto; background: #27ae60;">üìà Exportar Excel (CSV)</button>
                            </div>
                        </div>
                        
                        <div class="import-section" id="import-section">
                            <h4>Importar Dados</h4>
                            <p>Importe dados de um arquivo JSON ou Excel (CSV):</p>
                            <div class="import-options">
                                <input type="file" id="import-file-input" accept=".json,.csv,.xlsx" style="margin-bottom: 10px;">
                                <button id="import-data-btn" class="import-btn" style="width: auto;">üì• Importar Dados</button>
                            </div>
                            <div class="data-preview" id="import-preview">
                                {/* A pr√©via dos dados importados ser√° exibida aqui */}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Busca de Logs -->
                <div class="search-logs">
                    <h3>Buscar em Logs</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="search-log-date">Buscar por Data:</label>
                            <input type="date" id="search-log-date">
                        </div>
                        <div class="form-group">
                            <label for="search-log-ficha">Buscar por Ficha:</label>
                            <input type="number" id="search-log-ficha" placeholder="N√∫mero da ficha">
                        </div>
                        <div class="form-group">
                            <label for="search-log-product">Buscar por Produto:</label>
                            <input type="text" id="search-log-product" placeholder="Nome do produto">
                        </div>
                    </div>
                    <button id="clear-log-search" style="width: auto; margin-top: 10px;">Limpar Busca</button>
                </div>
                <table id="logs-table">
                    <thead>
                        <tr>
                            <th>Data/Hora</th>
                            <th>Ficha</th>
                            <th>Usu√°rio</th>
                            <th>Produto</th>
                            <th>Movimenta√ß√£o</th>
                            <th>Valor</th>
                        </tr>
                    </thead>
                    <tbody id="logs-table-body">
                        <!-- Os dados ser√£o preenchidos via JavaScript -->
                    </tbody>
                </table>
            </div>
            <button id="logout-btn" class="logout-btn">Sair</button>
        </div>
    </div>

    <script src="js/script.js"></script>
</body>
</html>